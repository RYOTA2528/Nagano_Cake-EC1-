<p id="notice"></p>
<div class="container px-5 px-sm-0">
 <div class="row col-md-3 col-md-8">
  <h2>ショッピングカート</h2>
  <%= button_to "全て削除", cart_items_destroy_all_path, method: :delete, "data-confirm" => "本当に消しますか"%>
 </div>
  <div class="row">
   <table class="table table-hober table-inverse ">
    <thead>
    <th>商品名</th>
    <th>数量</th>
    <th>単価(税込)</th>
    <th>小計</th>
    <th></th>
    </thead>
<tbody>
<% @cart_items.each do |cart_item| %>
 <tr>
  <td><%= cart_item.item.name %>></td>
  <td><%= form_with model:cart_item, local:true do |f| %>
   <%= f.select :amount, *[1..30] ,{ prompt: "個数選択" } %>
   <%= f.submit "変更", class:"btn btn-lg btn-block btn-info mt-4" %></td>
  <td><%= cart_item.item.with_tax_price %></td>
  <td><%= cart_item.subtotal %></td>
  <td><%= link_to "削除する", cart_item_path(cart_item), method: :delete, "data-confirm" => "本当に消しますか" %></td>
   <% @sum +=  cart_item.subtotal %>
<% end %>
<% end %>
  </tr>
</tbody>
  </div>
  </table>

<table border="1">
<tr>
<th>合計金額</th>
<td><%= @sum %></td>
</tr>
</table>
</div>